<ion-view class="task">
    <ion-content class="has-header">
        <div class="list" ng-if="vm.task">
            <div class="photos" ng-if="vm.task.files.length">
                <img ng-src="{{ file.url }}"
                     alt="image"
                     ng-repeat="file in vm.task.files" ng-if="$index < 1">
            </div>
            <p class="explanation">
                {{ vm.task.explanation }}
            </p>
        </div>
        <ion-list class="subtasks" flex ng-if="vm.subtasks.length">
            <ion-item ng-repeat="subtask in vm.subtasks">
                <p>
                    {{subtask.text}}
                </p>
                <div layout="row" layout-align="end center" flex>
                    <i ng-if="subtask.done && subtask.done.result == 1" class="fa fa-check-circle fa-lg success"></i>
                    <i ng-if="subtask.done && subtask.done.result == 0" class="fa fa-exclamation-circle fa-lg error"></i>
                    <md-button class="md-raised md-primary" ng-click="vm.showAnswerModal(subtask)">
                        <md-icon md-font-icon="fa fa-pencil fa-lg" aria-hidden="true"></md-icon>
                        Відправити відповідь
                    </md-button>
                </div>
            </ion-item>
        </ion-list>
        <div layout="row" layout-align="end center" flex ng-if="!vm.subtasks.length">
            <md-button class="md-raised md-primary" ng-click="answerModal.show()">
                <md-icon md-font-icon="fa fa-pencil fa-lg" aria-hidden="true"></md-icon>
                Відправити відповідь
            </md-button>
        </div>

        <div class="card" ng-include="'views/task/one/chat.html'"></div>

        <md-card ng-if="$root.user.role_id != 1" ng-repeat="chat in vm.chats">
            <md-list-item ng-click="vm.openChat(chat)" ng-if="$root.user.id != chat.created_by">
                <h5>Чат з користувачем {{chat.creator}}</h5>
            </div>
        </div>
    </ion-content>
</ion-view>

